<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©æ‰å°ç²é…±åŒå­¦ç”Ÿæ—¥å¿«ä¹</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'FZMiaoWu', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            background-color: #ffffff;
            overflow-x: hidden;
        }
        
        @font-face {
            font-family: 'FZMiaoWu';
            src: url('https://cdn.jsdelivr.net/npm/@fontsource/fangzheng-miaowu@1.0.0/FZMiaoWu-Regular.ttf');
        }

        .container {
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* å›¾ç‰‡è½®æ’­æ ·å¼ */
        .slideshow {
            display: none;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* ç¥ç¦å†…å®¹æ ·å¼ */
        .message-container {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            /* ç§»é™¤äº†èƒŒæ™¯å›¾ç‰‡ */
            background-color: transparent;
            z-index: 10;
            padding: 20px;
            box-sizing: border-box;
        }

        .message {
            font-size: 20px;
            color: #8b008b;
            margin-bottom: 30px;
            line-height: 1.6;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            font-family: 'FZMiaoWu', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 15px;
            max-width: 90%;
        }

        .cake {
            font-size: 60px;
            animation: bounce 2s infinite;
            margin-top: 20px;
        }

        /* æŒ‰é’®æ ·å¼ */
        .start-button {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 30px;
            background: linear-gradient(to right, #ff66cc, #ff99cc);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 5;
            display: none;
            font-family: 'FZMiaoWu', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            border: 3px solid #ffb6c1;
            box-shadow: 0 0 15px #ff66cc;
        }

        .start-button:hover {
            background: linear-gradient(to right, #ff33bb, #ff66cc);
        }

        /* çƒŸèŠ±æ•ˆæœ */
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
            box-shadow: 0 0 10px 2px currentColor;
            filter: blur(1px);
        }
        
        /* è¿ªå£«å°¼é£æ ¼çƒŸèŠ±æ ¸å¿ƒ */
        .firework-core {
            position: absolute;
            width: 5px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            box-shadow: 0 0 10px 2px #ffffff;
            z-index: 15;
        }
        
        /* è¿ªå£«å°¼é£æ ¼çƒŸèŠ±ç²’å­ */
        .firework-particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            z-index: 15;
        }
        
        /* è¿ªå£«å°¼é£æ ¼çƒŸèŠ±é—ªå…‰ */
        .firework-flash {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 14;
        }
        
        /* è¿ªå£«å°¼é£æ ¼çƒŸèŠ±å®¹å™¨ */
        .disney-fireworks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 15;
        }
        
        /* ç”Ÿæ—¥ç¥ç¦æ–‡æœ¬ */
        .birthday-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'FZMiaoWu', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            font-size: 48px;
            color: #fff;
            text-shadow: 0 0 10px #00f7ff, 0 0 20px #00f7ff, 0 0 30px #00f7ff;
            opacity: 0;
            z-index: 20;
            pointer-events: none;
            transition: opacity 2s ease-in-out;
        }
        
        .birthday-text.show {
            opacity: 1;
        }

        /* åŠ¨ç”» */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 2s ease-in;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å›¾ç‰‡è½®æ’­ -->
        <div class="slideshow" id="slideshow">
            <div class="slide active">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG899.jpg" alt="ç”Ÿæ—¥å¿«ä¹1">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG900.jpg" alt="ç”Ÿæ—¥å¿«ä¹2">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG901.jpg" alt="ç”Ÿæ—¥å¿«ä¹3">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG902.jpg" alt="ç”Ÿæ—¥å¿«ä¹4">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG903.jpg" alt="ç”Ÿæ—¥å¿«ä¹5">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG904.jpg" alt="ç”Ÿæ—¥å¿«ä¹6">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG905.jpg" alt="ç”Ÿæ—¥å¿«ä¹7">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG906.jpg" alt="ç”Ÿæ—¥å¿«ä¹8">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG907.jpg" alt="ç”Ÿæ—¥å¿«ä¹9">
            </div>
            <div class="slide">
                <img src="https://gitee.com/like_long/pic/raw/master/WechatIMG908.jpg" alt="ç”Ÿæ—¥å¿«ä¹10">
            </div>
        </div>

        <!-- å¼€å§‹æŒ‰é’® -->
        <button class="start-button" id="startButton">è‡´äº²çˆ±çš„å°ç²åŒå­¦</button>

        <!-- ç¥ç¦ä¿¡æ¯ -->
        <div class="message-container" id="messageContainer">
            <div class="message" id="message"></div>
            <div class="cake">ğŸ‚</div>
        </div>
        
        <!-- è¿ªå£«å°¼çƒŸèŠ±å®¹å™¨ -->
        <div class="disney-fireworks" id="disneyFireworks"></div>
        
        <!-- ç”Ÿæ—¥ç¥ç¦æ–‡æœ¬ -->
        <div class="birthday-text" id="birthdayText"></div>
    </div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="bgMusic" loop>
        <source src="juzipi.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å…ƒç´ ã€‚
    </audio>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ’­æ”¾éŸ³ä¹
        window.addEventListener('load', function() {
            const bgMusic = document.getElementById('bgMusic');
            
            // å°è¯•è‡ªåŠ¨æ’­æ”¾
            const playPromise = bgMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // è‡ªåŠ¨æ’­æ”¾æˆåŠŸ
                    console.log("éŸ³ä¹å¼€å§‹æ’­æ”¾");
                }).catch(error => {
                    // è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’
                    console.log("è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’: ", error);
                    
                    // åˆ›å»ºä¸€ä¸ªæç¤ºå…ƒç´ 
                    const playHint = document.createElement('div');
                    playHint.innerHTML = 'ğŸµ ç‚¹å‡»é¡µé¢æ’­æ”¾éŸ³ä¹';
                    playHint.style.position = 'fixed';
                    playHint.style.top = '20px';
                    playHint.style.left = '50%';
                    playHint.style.transform = 'translateX(-50%)';
                    playHint.style.padding = '10px 20px';
                    playHint.style.background = '#ff66cc';
                    playHint.style.color = 'white';
                    playHint.style.borderRadius = '30px';
                    playHint.style.zIndex = '1000';
                    playHint.style.cursor = 'pointer';
                    playHint.style.fontFamily = "'FZMiaoWu', 'å¾®è½¯é›…é»‘', Arial, sans-serif";
                    document.body.appendChild(playHint);
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    const playAudio = function() {
                        bgMusic.play();
                        playHint.remove();
                        document.body.removeEventListener('click', playAudio);
                    };
                    
                    playHint.addEventListener('click', playAudio);
                    document.body.addEventListener('click', playAudio, {once: true});
                });
            }
            
            // æ˜¾ç¤ºå›¾ç‰‡è½®æ’­
            document.querySelector('.slideshow').style.display = 'block';
            
            // å¼€å§‹å›¾ç‰‡è½®æ’­
            startSlideshow();
        });

        // å›¾ç‰‡è½®æ’­å‡½æ•°
        function startSlideshow() {
            let currentIndex = 0;
            const slides = document.querySelectorAll('.slide');
            const totalSlides = slides.length;
            const startButton = document.getElementById('startButton');
            
            // æ¯5ç§’åˆ‡æ¢ä¸€å¼ å›¾ç‰‡
            const slideInterval = setInterval(() => {
                // ç§»é™¤å½“å‰æ´»åŠ¨çŠ¶æ€
                slides[currentIndex].classList.remove('active');
                
                // è®¡ç®—ä¸‹ä¸€å¼ å›¾ç‰‡ç´¢å¼•
                currentIndex = (currentIndex + 1) % totalSlides;
                
                // æ·»åŠ æ–°çš„æ´»åŠ¨çŠ¶æ€
                slides[currentIndex].classList.add('active');
                
                // å¦‚æœæ˜¯æœ€åä¸€å¼ å›¾ç‰‡ï¼Œæ˜¾ç¤ºæŒ‰é’®
                if (currentIndex === totalSlides - 1) {
                    setTimeout(() => {
                        startButton.style.display = 'block';
                        startButton.classList.add('fade-in');
                    }, 1000);
                    clearInterval(slideInterval);
                }
            }, 5000);
        }

        // æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('startButton').addEventListener('click', function() {
            // éšè—å›¾ç‰‡è½®æ’­å’ŒæŒ‰é’®
            document.querySelector('.slideshow').style.display = 'none';
            this.style.display = 'none';
            
            // æ˜¾ç¤ºç¥ç¦ä¿¡æ¯
            const messageContainer = document.getElementById('messageContainer');
            messageContainer.style.display = 'flex';
            
            // åˆ›å»ºè¿ªå£«å°¼é£æ ¼çƒŸèŠ±æ•ˆæœ
            createDisneyFireworks();
            
            // æ˜¾ç¤ºç”Ÿæ—¥ç¥ç¦æ–‡æœ¬
            // å·²åˆ é™¤ç›¸å…³å†…å®¹
            
            // æ˜¾ç¤ºç¥ç¦è¯­
            showMessages();
        });

        // ç¥ç¦è¯­åˆ—è¡¨
        const messages = [
            "ä»Šå¤©æ˜¯12æœˆ18æ—¥",
            "ç¥æˆ‘ä»¬æ¸©æŸ”å¯çˆ±æ·˜æ°”ç¾ä¸½çš„å°ç²åŒå­¦ç”Ÿæ—¥å¿«ä¹!",
            "å–œæ¬¢è¿™ä»½ç”Ÿæ—¥ç¤¼ç‰©å˜›ï¼Ÿ",
            "è¿™å¯¹é¾™è€å¸ˆæ¥è¯´",
            "å®Œå…¨æ²¡æœ‰å‹åŠ›å¥½å§",
            "ç®€ç®€å•å•",
            "åªéœ€ç•¥åŠ¨å°æ‰‹",
            "ä»€ä¹ˆï¼Ÿä½ é—®ä¸ºä»€ä¹ˆæ˜¯è¿™é¦–æ­Œ",
            "å¾ˆç®€å•å•Š",
            "ä½ ç½‘æ˜“äº‘æ­Œå•å–œæ¬¢çš„åªæœ‰è¿™é¦–æ­Œ",
            "ä¸€é€‰ä¸€ï¼Œè¿™æˆ‘è¿˜ä¼šé€‰é”™ï¼Ÿ",
            "è¿™ç®€ç›´æ˜¯é€åˆ†é¢˜å¥½å§",
            "å›æƒ³11æœˆ15æ—¥",
            "æˆ‘ä»¬åœ¨æµ·å²›â€œé€®è·¯äººâ€æ—¶æ— æ„ç›¸é‡",
            "è¿™å¤§æ¦‚å°±æ˜¯å†¥å†¥ä¹‹ä¸­çš„ç¼˜åˆ†å§",
            "ä»é‚£ä»¥åï¼Œæ¯å¤©å¼€å¼€å¿ƒå¿ƒå¸¦ä½ é©¬è¸åº¦å‡å²›",
            "å·§åˆçš„æ˜¯ï¼Œæˆ‘ä»¬éƒ½çˆ±çœ‹è±†ç“£é«˜åˆ†å‰§",
            "è€Œä¸”ç‰‡å•â€œå®Œç¾äº’æ–¥â€â€”â€”äº¤é›†å‡ ä¹ä¸ºé›¶",
            "å¹¶é›†å´åˆšå¥½è¦†ç›–äº†æ¦œå•å‰æ’",
            "ç¬‘æ­»",
            "æˆ‘ä»¬ä¸€èµ·çœ‹äº†ã€Šç›—æ¢¦ç©ºé—´ã€‹ã€ã€Šç™½æ—¥æ¢¦æƒ³å®¶ã€‹ã€ã€ŠAll Her Faultã€‹å’Œã€Šæ€ªå¥‡ç‰©è¯­ã€‹",
            "è¿™æ®µæ—¶å…‰å¾ˆå¿«ä¹",
            "è¿™é‡Œè¦æ‰¹è¯„ä¸€ä¸‹æŸäººæ´—æ¾¡æ‹–å»¶ç—‡",
            "æ¯æ¬¡éƒ½è®©é¾™è€å¸ˆç­‰å¾—å¿«ç¡ç€äº†",
            "ä»¥å‰æˆ‘ç¡çœ ä¸å¥½ï¼Œæ€»è¦é è¤ªé»‘ç´ ç†¬åˆ°ä¸¤ç‚¹å¤š",
            "ç°åœ¨ä¸åƒè¤ªé»‘ç´ çœ‹å®Œå‰§å°±èƒ½ç§’ç¡",
            "You are my medicine",
            "å¸Œæœ›ä»¥åæœ‰æœºä¼š",
            "æˆ‘ä»¬èƒ½ä¸€èµ·ä½“éªŒæ›´å¤šæ–°å¥‡å¥½ç©çš„äº‹ç‰©ã€‚",
            "ok",
            "åºŸè¯è¯´å¾—æœ‰ç‚¹å¤šäº†",
            "è¯¥è¯´æœ€é‡è¦çš„äº‹äº†",
            "ç¥",
            "èªæ˜å¯çˆ±æœºæ™ºå–„è‰¯",
            "å‹‡æ•¢æ— ç•å¤©ç”Ÿä¸½è´¨",
            "éœ¸æ°”ä¾§æ¼é‚ªæ„Ÿç‹‚æ‹½",
            "æ™ºå•†è¶…ç¾¤æå…·ç„¶åŠ›",
            "æ¸©æ–‡å°”é›…é£åº¦ç¿©ç¿©",
            "å½¬å½¬æœ‰ç¤¼å¤©ä¸‹æ— åŒ",
            "çœ‰æ¸…æ—¥ç§€å¹å¼¹å¯ç ´",
            "äººé¢æ¡ƒèŠ±è‹±ä¿Šæ½‡æ´’",
            "æ°”å®‡ä¸å‡¡ç‰æ ‘ä¸´é£",
            "ä»ªè¡¨å ‚å ‚é£æµå€œå‚¥",
            "é¢å¦‚å† ç‰é£åº¦ç¿©ç¿©",
            "ç¾ç›®ç›¼å…®æ¸…æ–°ä¿Šé€¸é…·åˆ°çˆ†çš„",
            "å¤©æ‰å°ç²é…±åŒå­¦",
            "ç”Ÿæ—¥å¿«ä¹ï¼ï¼ï¼",
            "æ¯å¤©éƒ½è¦å¼€å¼€å¿ƒå¿ƒå“¦",
            "---é¾™è€å¸ˆ"



            // "äº²çˆ±çš„å°ç²åŒå­¦ï¼š",
            // "ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚",
            // "åœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œ",
            // "æˆ‘æƒ³å¯¹ä½ è¯´å£°è°¢è°¢ï¼Œ",
            // "è°¢è°¢ä½ ä¸€ç›´ä»¥æ¥çš„é™ªä¼´å’Œæ”¯æŒã€‚",
            // "ä½ çš„ç¬‘å®¹å¦‚é˜³å…‰èˆ¬æ¸©æš–ï¼Œ",
            // "ç…§äº®äº†æˆ‘ç”Ÿæ´»ä¸­çš„æ¯ä¸€å¤©ã€‚",
            // "æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½åƒä»Šå¤©ä¸€æ ·ç¾å¥½ï¼Œ",
            // "æ„¿ä½ çš„æ¯ä¸€ä¸ªæ¢¦æƒ³éƒ½èƒ½å®ç°ã€‚",
            // "æ„¿ä½ æ°¸è¿œä¿æŒé‚£ä»½çº¯çœŸä¸å–„è‰¯ï¼Œ",
            // "æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ã€‚",
            // "ç¥ä½ èº«ä½“å¥åº·ï¼Œå­¦ä¹ è¿›æ­¥ï¼Œ",
            // "å·¥ä½œé¡ºåˆ©ï¼Œå¿ƒæƒ³äº‹æˆï¼",
            // "å†æ¬¡ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‰",
            // "æ„¿æˆ‘ä»¬çš„å‹è°Šå¤©é•¿åœ°ä¹…ï¼ğŸ’•"
        ];

        // æ˜¾ç¤ºç¥ç¦è¯­å‡½æ•°
        function showMessages() {
            const messageElement = document.getElementById('message');
            let index = 0;
            
            function displayNextMessage() {
                if (index < messages.length) {
                    messageElement.innerHTML = messages[index];
                    messageElement.classList.add('fade-in');
                    
                    index++;
                    setTimeout(displayNextMessage, 3000); // æ¯3ç§’æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯
                }
            }
            
            displayNextMessage();
        }

        // åˆ›å»ºè¿ªå£«å°¼é£æ ¼çƒŸèŠ±æ•ˆæœ
        function createDisneyFireworks() {
            // åˆå§‹åŒ–ç”»å¸ƒ
            const container = document.getElementById('disneyFireworks');
            const canvas = document.createElement('canvas');
            canvas.style.position = 'absolute';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            let cw = window.innerWidth;
            let ch = window.innerHeight;
            let fireworks = [];
            let particles = [];
            // æ ¸å¿ƒä¿®æ”¹ï¼šåŸºç¡€è‰²ç›¸æ”¹ä¸º330ï¼ˆç²‰çº¢è‰²ï¼‰ï¼Œä¸å†æ˜¯éšæœº
            let baseHue = 330; 
            let limiterTotal = 5;
            let limiterTick = 0;
            let timerTotal = 80;
            let timerTick = 0;
            let mousedown = false;
            let mx, my;
            
            window.addEventListener('resize', function() {
                cw = window.innerWidth;
                ch = window.innerHeight;
                canvas.width = cw;
                canvas.height = ch;
            });
            
            function random(min, max) {
                return Math.random() * (max - min) + min;
            }
            
            function calculateDistance(p1x, p1y, p2x, p2y) {
                return Math.sqrt(Math.pow(p1x - p2x, 2) + Math.pow(p1y - p2y, 2));
            }
            
            class Firework {
                constructor(sx, sy, tx, ty) {
                    this.x = sx;
                    this.y = sy;
                    this.sx = sx;
                    this.sy = sy;
                    this.tx = tx;
                    this.ty = ty;
                    this.distanceToTarget = calculateDistance(sx, sy, tx, ty);
                    this.distanceTraveled = 0;
                    this.coordinates = [];
                    this.coordinateCount = 3;
                    while(this.coordinateCount--) {
                        this.coordinates.push([this.x, this.y]);
                    }
                    this.angle = Math.atan2(ty - sy, tx - sx);
                    this.speed = 2;
                    this.acceleration = 1.05;
                    this.brightness = random(60, 80); // ç¨å¾®è°ƒäº®ä¸€ç‚¹
                    this.targetRadius = 1;
                    // çƒŸèŠ±å‡ç©ºæ—¶çš„é¢œè‰²ï¼šç²‰è‰²æˆ–é‡‘è‰²
                    this.hue = Math.random() < 0.5 ? 330 : 45; 
                }
            
                update(index) {
                    this.coordinates.pop();
                    this.coordinates.unshift([this.x, this.y]);
            
                    if(this.targetRadius < 8) {
                        this.targetRadius += 0.3;
                    } else {
                        this.targetRadius = 1;
                    }
            
                    this.speed *= this.acceleration;
                    let vx = Math.cos(this.angle) * this.speed;
                    let vy = Math.sin(this.angle) * this.speed;
                    this.distanceTraveled = calculateDistance(this.sx, this.sy, this.x + vx, this.y + vy);
            
                    if(this.distanceTraveled >= this.distanceToTarget) {
                        // å¢åŠ çˆ±å¿ƒå‡ºç°çš„æ¦‚ç‡åˆ° 40%
                        let shape = Math.random() < 0.4 ? 'heart' : 'circle';
                        createParticles(this.tx, this.ty, shape);
                        fireworks.splice(index, 1);
                    } else {
                        this.x += vx;
                        this.y += vy;
                    }
                }
            
                draw() {
                    ctx.beginPath();
                    ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                    ctx.lineTo(this.x, this.y);
                    ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, ' + this.brightness + '%)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.arc(this.tx, this.ty, this.targetRadius, 0, Math.PI * 2);
                    ctx.stroke();
                }
            }
            
            class Particle {
                constructor(x, y, type) {
                    this.x = x;
                    this.y = y;
                    this.coordinates = [];
                    this.coordinateCount = 5;
                    while(this.coordinateCount--) {
                        this.coordinates.push([this.x, this.y]);
                    }
                    
                    // === æ ¸å¿ƒé¢œè‰²æ§åˆ¶é€»è¾‘ ===
                    if (type === 'heart') {
                        // çˆ±å¿ƒå¼ºåˆ¶ä¸ºï¼šçƒ­ç²‰è‰²(330) æˆ– æ­£çº¢è‰²(350)
                        this.hue = random(330, 350); 
                        this.brightness = random(60, 90); // äº®ä¸€ç‚¹
                    } else {
                        // æ™®é€šåœ†å½¢çƒŸèŠ±ï¼šåœ¨ç²‰è‰²(320)ã€ç´«è‰²(280)ã€æš–é‡‘(40)ä¹‹é—´éšæœº
                        // è¿™æ ·é…è‰²ä¼šéå¸¸é«˜çº§ä¸”å¯çˆ±
                        let colorType = Math.random();
                        if (colorType < 0.6) {
                            this.hue = random(300, 340); // 60% æ¦‚ç‡æ˜¯ç²‰è‰²ç³»
                        } else if (colorType < 0.8) {
                            this.hue = random(260, 290); // 20% æ¦‚ç‡æ˜¯æ¢¦å¹»ç´«è‰²
                        } else {
                            this.hue = random(40, 50);   // 20% æ¦‚ç‡æ˜¯é—ªäº®é‡‘è‰²
                        }
                        this.brightness = random(50, 80);
                    }
            
                    this.alpha = 1;
                    this.decay = random(0.01, 0.025); // ç¨å¾®å‡æ…¢æ¶ˆå¤±é€Ÿåº¦ï¼Œæ›´æ¢¦å¹»
            
                    if (type === 'heart') {
                        let angle = random(0, Math.PI * 2);
                        let force = random(0.5, 3.5);
                        let heartX = 16 * Math.pow(Math.sin(angle), 3);
                        let heartY = -(13 * Math.cos(angle) - 5 * Math.cos(2 * angle) - 2 * Math.cos(3 * angle) - Math.cos(4 * angle));
                        
                        this.vx = (heartX / 10) * force;
                        this.vy = (heartY / 10) * force;
                        this.friction = 0.96;
                        this.gravity = 0.05;
                    } else {
                        this.angle = random(0, Math.PI * 2);
                        this.speed = random(1, 10);
                        this.friction = 0.95;
                        this.gravity = 1;
                        this.vx = Math.cos(this.angle) * this.speed;
                        this.vy = Math.sin(this.angle) * this.speed;
                    }
                }
            
                update(index) {
                    this.coordinates.pop();
                    this.coordinates.unshift([this.x, this.y]);
                    this.vx *= this.friction;
                    this.vy *= this.friction;
                    this.vy += this.gravity;
                    this.x += this.vx;
                    this.y += this.vy;
                    this.alpha -= this.decay;
            
                    if(this.alpha <= this.decay) {
                        particles.splice(index, 1);
                    }
                }
            
                draw() {
                    ctx.beginPath();
                    ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                    ctx.lineTo(this.x, this.y);
                    ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
            
            function createParticles(x, y, shape) {
                let particleCount = shape === 'heart' ? 60 : 100;
                while(particleCount--) {
                    particles.push(new Particle(x, y, shape));
                }
            }
            
            function loop() {
                requestAnimationFrame(loop);
            
                // æ‹–å°¾èƒŒæ™¯è‰²ä¹Ÿæ”¹ä¸ºææ·¡çš„ç´«é»‘è‰²ï¼Œè®©ç²‰è‰²æ›´æ˜¾çœ¼
                ctx.globalCompositeOperation = 'destination-out';
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, cw, ch);
                
                ctx.globalCompositeOperation = 'lighter';
            
                var i = fireworks.length;
                while(i--) {
                    fireworks[i].draw();
                    fireworks[i].update(i);
                }
            
                var i = particles.length;
                while(i--) {
                    particles[i].draw();
                    particles[i].update(i);
                }
            
                if(timerTick >= timerTotal) {
                    if(!mousedown) {
                        fireworks.push(new Firework(cw / 2, ch, random(0, cw), random(0, ch / 2)));
                        timerTick = 0;
                    }
                } else {
                    timerTick++;
                }
            
                if(limiterTick >= limiterTotal) {
                    if(mousedown) {
                        fireworks.push(new Firework(cw / 2, ch, mx, my));
                        limiterTick = 0;
                    }
                } else {
                    limiterTick++;
                }
            }
            
            canvas.addEventListener('mousemove', function(e) {
                mx = e.clientX;
                my = e.clientY;
            });
            
            canvas.addEventListener('mousedown', function(e) {
                e.preventDefault();
                mousedown = true;
            });
            
            canvas.addEventListener('mouseup', function(e) {
                e.preventDefault();
                mousedown = false;
            });
            
            // å¼€å§‹åŠ¨ç”»å¾ªç¯
            loop();
        }
    </script>
</body>
</html>